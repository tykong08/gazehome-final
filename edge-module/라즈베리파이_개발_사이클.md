# ë¼ì¦ˆë² ë¦¬íŒŒì´ ê°œë°œ/í…ŒìŠ¤íŠ¸ ì‚¬ì´í´ ê°€ì´ë“œ

## ğŸ”„ ì „ì²´ í”„ë¡œì„¸ìŠ¤ ê°œìš”

```
ê°œë°œ (macOS) â†’ Git Push â†’ ë¼ì¦ˆë² ë¦¬íŒŒì´ Pull â†’ ì‹¤í–‰ â†’ í…ŒìŠ¤íŠ¸ â†’ ì´ˆê¸°í™” â†’ ë°˜ë³µ
```

---

## ğŸ“‹ ë‹¨ê³„ë³„ ìƒì„¸ ê°€ì´ë“œ

### 1ï¸âƒ£ ê°œë°œ í™˜ê²½ (macOS)

#### ì½”ë“œ ìˆ˜ì • í›„ Git Push
```bash
# edge-module ë””ë ‰í† ë¦¬ì—ì„œ
cd edge-module

# ë³€ê²½ì‚¬í•­ í™•ì¸
git status

# ìŠ¤í…Œì´ì§•
git add .

# ì»¤ë°‹
git commit -m "feat: ì‹œì„  ì¶”ì  ì•Œê³ ë¦¬ì¦˜ ê°œì„ "

# í‘¸ì‹œ
git push origin develop
```

---

### 2ï¸âƒ£ ë¼ì¦ˆë² ë¦¬íŒŒì´ ë°°í¬ í™˜ê²½

#### ì´ˆê¸° ì„¤ì • (ìµœì´ˆ 1íšŒë§Œ)

```bash
# SSH ì ‘ì†
ssh pi@raspberrypi.local
# ë¹„ë°€ë²ˆí˜¸ ì…ë ¥

# í”„ë¡œì íŠ¸ í´ë¡  (ìµœì´ˆ 1íšŒ)
cd ~
git clone https://github.com/ESWC-AIRIS/edge-module.git
cd edge-module

# develop ë¸Œëœì¹˜ë¡œ ì „í™˜
git checkout develop

# uv ì„¤ì¹˜ (ìµœì´ˆ 1íšŒ)
curl -LsSf https://astral.sh/uv/install.sh | sh
source $HOME/.cargo/env

# Node.js ì„¤ì¹˜ (ìµœì´ˆ 1íšŒ)
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# ì˜ì¡´ì„± ì„¤ì¹˜
uv sync
cd frontend && npm install && cd ..
```

---

#### ğŸ”„ ë°˜ë³µ ê°œë°œ ì‚¬ì´í´

**A. ìƒˆ ì½”ë“œ ê°€ì ¸ì˜¤ê¸°**
```bash
# 1. SSH ì ‘ì†
ssh pi@raspberrypi.local

# 2. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd ~/edge-module

# 3. ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
git pull origin develop

# 4. ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œ)
uv sync
cd frontend && npm install && cd ..
```

**B. ì„œë²„ ì‹¤í–‰**
```bash
# ë°±ì—”ë“œ ì‹¤í–‰ (ì²« ë²ˆì§¸ í„°ë¯¸ë„)
cd ~/edge-module
uv run run.py

# í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ & ì„œë¹™ (ë‘ ë²ˆì§¸ í„°ë¯¸ë„)
# SSH ìƒˆ ì„¸ì…˜ ì—´ê¸°: ssh pi@raspberrypi.local
cd ~/edge-module/frontend
npm run build
npx serve -s dist -l 5173
```

**ë˜ëŠ” ê°œë°œ ëª¨ë“œë¡œ ì‹¤í–‰**
```bash
# í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ëª¨ë“œ (ë‘ ë²ˆì§¸ í„°ë¯¸ë„)
cd ~/edge-module/frontend
npm run dev -- --host 0.0.0.0
```

**C. ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†**
```
http://raspberrypi.local:5173
# ë˜ëŠ”
http://{ë¼ì¦ˆë² ë¦¬íŒŒì´_IP}:5173
```

**D. í…ŒìŠ¤íŠ¸ ì§„í–‰**
```
1. ì˜¨ë³´ë”© í˜ì´ì§€ì—ì„œ ì‹œì‘
2. ë¡œê·¸ì¸ (demo_user)
3. ë³´ì • ì§„í–‰ (9í¬ì¸íŠ¸)
4. í™ˆ í™”ë©´ì—ì„œ ê¸°ê¸° ì œì–´ í…ŒìŠ¤íŠ¸
5. AI ì¶”ì²œ ìˆ˜ì‹  í…ŒìŠ¤íŠ¸
```

**E. í…ŒìŠ¤íŠ¸ í›„ ë°ì´í„° í™•ì¸**
```bash
# DB ìƒíƒœ í™•ì¸
cd ~/edge-module
uv run check_db_status.py

# ë³´ì • íŒŒì¼ í™•ì¸
ls -lh ~/.gazehome/calibrations/
```

**F. ë³´ì •ë§Œ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ í…ŒìŠ¤íŠ¸**
```bash
# 1. ì„œë²„ ì¢…ë£Œ (Ctrl+C)

# 2. ë³´ì • ë°ì´í„°ë§Œ ì‚­ì œ
cd ~/edge-module
uv run reset_calibration.py

# 3. ì„œë²„ ì¬ì‹œì‘
uv run run.py

# 4. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ â†’ ì˜¨ë³´ë”©ë¶€í„° ë‹¤ì‹œ ì‹œì‘
```

**G. ì „ì²´ ì´ˆê¸°í™”í•˜ê³  ë‹¤ì‹œ í…ŒìŠ¤íŠ¸**
```bash
# 1. ì„œë²„ ì¢…ë£Œ (Ctrl+C)

# 2. ì „ì²´ ë°ì´í„° ì‚­ì œ
cd ~/edge-module
uv run reset_all_data.py
# â†’ y ì…ë ¥

# 3. ì„œë²„ ì¬ì‹œì‘
uv run run.py

# 4. ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ â†’ ì˜¨ë³´ë”©ë¶€í„° ë‹¤ì‹œ ì‹œì‘
```

**H. ìˆ˜ì • ì‚¬í•­ ë°œê²¬ ì‹œ**
```
1. ë¼ì¦ˆë² ë¦¬íŒŒì´ ì„œë²„ ì¢…ë£Œ
2. macOSì—ì„œ ì½”ë“œ ìˆ˜ì •
3. Git Push
4. ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ Git Pull
5. ì„œë²„ ì¬ì‹œì‘
```

---

## ğŸš€ ë¹ ë¥¸ ëª…ë ¹ì–´ ëª¨ìŒ

### ë¼ì¦ˆë² ë¦¬íŒŒì´ SSH ì ‘ì†
```bash
ssh pi@raspberrypi.local
```

### ì½”ë“œ ì—…ë°ì´íŠ¸
```bash
cd ~/edge-module && git pull origin develop
```

### ë°±ì—”ë“œ ì‹¤í–‰
```bash
cd ~/edge-module && uv run run.py
```

### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (í”„ë¡œë•ì…˜)
```bash
cd ~/edge-module/frontend && npm run build && npx serve -s dist -l 5173
```

### í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ê°œë°œ)
```bash
cd ~/edge-module/frontend && npm run dev -- --host 0.0.0.0
```

### DB ìƒíƒœ í™•ì¸
```bash
cd ~/edge-module && uv run check_db_status.py
```

### ë³´ì •ë§Œ ì´ˆê¸°í™”
```bash
cd ~/edge-module && uv run reset_calibration.py
```

### ì „ì²´ ì´ˆê¸°í™”
```bash
cd ~/edge-module && uv run reset_all_data.py
```

---

## ğŸ“Š ì¼ë°˜ì ì¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë³´ì • ì•Œê³ ë¦¬ì¦˜ ê°œì„  í…ŒìŠ¤íŠ¸

```bash
# macOSì—ì„œ ìˆ˜ì •
vim edge-module/model/calibration/nine_point.py
git add . && git commit -m "fix: 9í¬ì¸íŠ¸ ë³´ì • ì •í™•ë„ ê°œì„ " && git push origin develop

# ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ
ssh pi@raspberrypi.local
cd ~/edge-module
git pull origin develop

# ë³´ì • ë°ì´í„°ë§Œ ì´ˆê¸°í™”
uv run reset_calibration.py

# ì„œë²„ ì‹¤í–‰
uv run run.py

# í…ŒìŠ¤íŠ¸: ë¸Œë¼ìš°ì €ì—ì„œ ë³´ì • ë‹¤ì‹œ ì§„í–‰
# ê²°ê³¼ í™•ì¸ í›„ ë§Œì¡±ìŠ¤ëŸ¬ìš°ë©´ ë‹¤ìŒ ì‘ì—…, ì•„ë‹ˆë©´ ë‹¤ì‹œ ìˆ˜ì •
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: UI ë³€ê²½ í…ŒìŠ¤íŠ¸

```bash
# macOSì—ì„œ ìˆ˜ì •
vim edge-module/frontend/src/pages/HomePage.jsx
git add . && git commit -m "style: í™ˆ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ ê°œì„ " && git push origin develop

# ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ
ssh pi@raspberrypi.local
cd ~/edge-module
git pull origin develop

# í”„ë¡ íŠ¸ì—”ë“œë§Œ ì¬ë¹Œë“œ (ë°±ì—”ë“œëŠ” ê·¸ëŒ€ë¡œ)
cd frontend
npm run build
npx serve -s dist -l 5173

# ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨í•˜ì—¬ í™•ì¸
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ í…ŒìŠ¤íŠ¸

```bash
# macOSì—ì„œ ìˆ˜ì •
vim edge-module/backend/core/database.py
git add . && git commit -m "feat: ê¸°ê¸° íƒœê·¸ í•„ë“œ ì¶”ê°€" && git push origin develop

# ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ
ssh pi@raspberrypi.local
cd ~/edge-module
git pull origin develop

# ì „ì²´ DB ì´ˆê¸°í™” (ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ í•„ìš”)
uv run reset_all_data.py
# â†’ y

# ì„œë²„ ì‹¤í–‰ (DB ìë™ ì¬ìƒì„±)
uv run run.py

# í…ŒìŠ¤íŠ¸: ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì§„í–‰
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 4: ê¸°ê¸° ì œì–´ ë¡œì§ ê°œì„ 

```bash
# macOSì—ì„œ ìˆ˜ì •
vim edge-module/backend/api/devices.py
git add . && git commit -m "fix: ê¸°ê¸° í´ë¦­ ì‘ë‹µ ê°œì„ " && git push origin develop

# ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ
ssh pi@raspberrypi.local
cd ~/edge-module
git pull origin develop

# ë³´ì •ì€ ê·¸ëŒ€ë¡œ, ë°±ì—”ë“œë§Œ ì¬ì‹œì‘
# (Ctrl+Cë¡œ ë°±ì—”ë“œ ì¢…ë£Œ)
uv run run.py

# ë¸Œë¼ìš°ì €ëŠ” ê·¸ëŒ€ë¡œ, ê¸°ê¸° ì œì–´ë§Œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸
```

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì„œë²„ê°€ ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¼ ë•Œ
```bash
# í¬íŠ¸ ì‚¬ìš© ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì°¾ê¸°
lsof -i :8000  # ë°±ì—”ë“œ
lsof -i :5173  # í”„ë¡ íŠ¸ì—”ë“œ

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 {PID}
```

### Git Pull ì¶©ëŒ ë°œìƒ ì‹œ
```bash
# ë¡œì»¬ ë³€ê²½ì‚¬í•­ ë²„ë¦¬ê¸° (ë¼ì¦ˆë² ë¦¬íŒŒì´ëŠ” ë°°í¬ í™˜ê²½)
git reset --hard origin/develop
git pull origin develop
```

### ì˜ì¡´ì„± ì„¤ì¹˜ ì˜¤ë¥˜
```bash
# Python ì˜ì¡´ì„± ì¬ì„¤ì¹˜
cd ~/edge-module
rm -rf .venv
uv sync

# Node ì˜ì¡´ì„± ì¬ì„¤ì¹˜
cd frontend
rm -rf node_modules
npm install
```

### ì›¹ìº  ì¸ì‹ ì•ˆ ë  ë•Œ
```bash
# ì¹´ë©”ë¼ ê¶Œí•œ í™•ì¸
ls -l /dev/video*

# ê¶Œí•œ ë¶€ì—¬
sudo usermod -a -G video $USER
# ì¬ë¶€íŒ… í•„ìš”
sudo reboot
```

---

## ğŸ’¡ í”„ë¡œë•ì…˜ ë°°í¬ (systemd ì„œë¹„ìŠ¤)

### ìë™ ì‹¤í–‰ ì„¤ì • (ì„ íƒì‚¬í•­)

**ë°±ì—”ë“œ ì„œë¹„ìŠ¤**
```bash
# /etc/systemd/system/gazehome-backend.service
sudo nano /etc/systemd/system/gazehome-backend.service
```

```ini
[Unit]
Description=GazeHome Backend Service
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/edge-module
ExecStart=/home/pi/.cargo/bin/uv run run.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤**
```bash
sudo nano /etc/systemd/system/gazehome-frontend.service
```

```ini
[Unit]
Description=GazeHome Frontend Service
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/edge-module/frontend
ExecStart=/usr/bin/npx serve -s dist -l 5173
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

**ì„œë¹„ìŠ¤ í™œì„±í™”**
```bash
sudo systemctl daemon-reload
sudo systemctl enable gazehome-backend
sudo systemctl enable gazehome-frontend
sudo systemctl start gazehome-backend
sudo systemctl start gazehome-frontend

# ìƒíƒœ í™•ì¸
sudo systemctl status gazehome-backend
sudo systemctl status gazehome-frontend

# ë¡œê·¸ í™•ì¸
sudo journalctl -u gazehome-backend -f
```

**ì„œë¹„ìŠ¤ ì‚¬ìš© ì‹œ ì—…ë°ì´íŠ¸ í”„ë¡œì„¸ìŠ¤**
```bash
# 1. ì½”ë“œ ì—…ë°ì´íŠ¸
cd ~/edge-module
git pull origin develop

# 2. ì„œë¹„ìŠ¤ ì¬ì‹œì‘
sudo systemctl restart gazehome-backend
sudo systemctl restart gazehome-frontend

# 3. ë°ì´í„° ì´ˆê¸°í™” í•„ìš” ì‹œ
sudo systemctl stop gazehome-backend
uv run reset_calibration.py
sudo systemctl start gazehome-backend
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë§¤ í…ŒìŠ¤íŠ¸ë§ˆë‹¤
- [ ] macOSì—ì„œ ì½”ë“œ ìˆ˜ì •
- [ ] Git commit & push
- [ ] ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ git pull
- [ ] ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ í™•ì¸
- [ ] ì„œë²„ ì¬ì‹œì‘
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸
- [ ] í•„ìš” ì‹œ ë°ì´í„° ì´ˆê¸°í™”

### ë³´ì • í…ŒìŠ¤íŠ¸ ì‹œ
- [ ] `reset_calibration.py` ì‹¤í–‰
- [ ] ì„œë²„ ì¬ì‹œì‘
- [ ] ì˜¨ë³´ë”© â†’ ë³´ì • ì§„í–‰
- [ ] ê²°ê³¼ í™•ì¸

### DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ
- [ ] `reset_all_data.py` ì‹¤í–‰
- [ ] ì„œë²„ ì¬ì‹œì‘ (DB ìë™ ì¬ìƒì„±)
- [ ] ì²˜ìŒë¶€í„° í…ŒìŠ¤íŠ¸

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

```bash
# 1. macOSì—ì„œ ê°œë°œ
git add . && git commit -m "..." && git push origin develop

# 2. ë¼ì¦ˆë² ë¦¬íŒŒì´ì—ì„œ ë°°í¬
ssh pi@raspberrypi.local
cd ~/edge-module && git pull origin develop

# 3. í…ŒìŠ¤íŠ¸ ì¤€ë¹„
uv run reset_calibration.py  # ë˜ëŠ” reset_all_data.py

# 4. ì‹¤í–‰
uv run run.py  # ë°±ì—”ë“œ
cd frontend && npm run dev -- --host 0.0.0.0  # í”„ë¡ íŠ¸ì—”ë“œ

# 5. í…ŒìŠ¤íŠ¸
ë¸Œë¼ìš°ì €: http://raspberrypi.local:5173

# 6. í™•ì¸
uv run check_db_status.py

# 7. ë‹¤ì‹œ 1ë²ˆìœ¼ë¡œ
```

**ì´ ì‚¬ì´í´ì„ ë°˜ë³µí•˜ë©´ì„œ ì ì§„ì ìœ¼ë¡œ ê°œì„ !** ğŸš€
