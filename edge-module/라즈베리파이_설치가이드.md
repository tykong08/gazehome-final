# ğŸ“ Raspberry Pi 4 GazeHome ì„¤ì¹˜ ê°€ì´ë“œ

**ëŒ€ìƒ**: Raspberry Pi 4 (ARMv8/ARM64 - Bullseye ì´ìƒ)  
**ë°©ì‹**: requirements.txt + í‘œì¤€ Python venv  
**ì†Œìš”ì‹œê°„**: 20~30ë¶„

---

## ğŸ“‹ ì „ì œì¡°ê±´

- **Raspberry Pi 4** (2GB ì´ìƒ ë©”ëª¨ë¦¬ ê¶Œì¥)
- **Raspbian Bullseye ì´ìƒ** (OS)
- **ì¸í„°ë„· ì—°ê²°** (WiFi ë˜ëŠ” Ethernet)
- **SSH ì ‘ì†** ë˜ëŠ” í„°ë¯¸ë„ ì§ì ‘ ì ‘ì†

---

## ğŸš€ Step 1: ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ ë° ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# SSH ì ‘ì† (ë˜ëŠ” í„°ë¯¸ë„)
ssh pi@raspberrypi.local
# ë¹„ë°€ë²ˆí˜¸: raspberry (ê¸°ë³¸ê°’)

# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update
sudo apt upgrade -y

# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt install -y \
  git \
  python3.11 \
  python3-pip \
  python3-venv \
  python3-dev \
  python3-opencv \
  python3-numpy \
  build-essential \
  cmake \
  pkg-config

# FFmpeg ì„¤ì¹˜ (ì˜ìƒ ì²˜ë¦¬ìš©)
sudo apt install -y ffmpeg

# MediaPipe ì˜ì¡´ì„± (ë¼ì´ë¸ŒëŸ¬ë¦¬)
sudo apt install -y \
  libxcb-shm0 \
  libsdl2-2.0-0 \
  libxv1 \
  libtheora0 \
  libva-drm2 \
  libva-x11-2 \
  libvdpau1 \
  libharfbuzz0b \
  libbluray2 \
  libatlas-base-dev \
  libgtk-3-0 \
  libgl1-mesa-glx \
  libglib2.0-0
```

**ì„¤ëª…**: 
- `python3-opencv`, `python3-numpy`: ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ (ë¹Œë“œ ì‹œê°„ ì ˆì•½)
- ë‚˜ë¨¸ì§€: MediaPipe ì‹¤í–‰ì‹œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

## ğŸ”§ Step 2: í”„ë¡œì íŠ¸ í´ë¡  ë° ë””ë ‰í† ë¦¬ ìƒì„±

```bash
# í”„ë¡œì íŠ¸ í´ë¡ 
cd ~
git clone https://github.com/ESWC-AIRIS/edge-module.git
cd edge-module

# develop ë¸Œëœì¹˜ í™•ì¸
git checkout develop
git pull origin develop

# ì„¤ì • ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p ~/.gazehome/calibrations

# ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸
ls -la
```

---

## ğŸ Step 3: Python ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”

```bash
# Python 3.11ë¡œ ê°€ìƒí™˜ê²½ ìƒì„± (system-site-packages í¬í•¨)
python3.11 -m venv .venv --system-site-packages

# ê°€ìƒí™˜ê²½ í™œì„±í™”
source .venv/bin/activate

# ë²„ì „ í™•ì¸ (3.11 í™•ì¸)
python --version
which python

# pip ì—…ê·¸ë ˆì´ë“œ
pip install --upgrade pip setuptools wheel
```

**ì„¤ëª…**: 
- `--system-site-packages`: ì‹œìŠ¤í…œì˜ opencv, numpy ë“±ì„ ì¬ì‚¬ìš©í•˜ì—¬ ì‹œê°„ ë‹¨ì¶•
- í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë©´ ë¨

---

## ğŸ“¦ Step 4: requirements.txtë¡œ Python ì˜ì¡´ì„± ì„¤ì¹˜

```bash
# ê°€ìƒí™˜ê²½ì´ í™œì„±í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
source .venv/bin/activate
echo $VIRTUAL_ENV  # /home/pi/edge-module/.venv ì¶œë ¥ë˜ì–´ì•¼ í•¨

# requirements.txt ì„¤ì¹˜
pip install -r requirements.txt

# ì„¤ì¹˜ í™•ì¸ (3~5ë¶„ ì†Œìš”)
pip list | grep -E "fastapi|uvicorn|scikit-learn"
```

**ì„¤ëª…**: requirements.txtì— ëª¨ë“  í•„ìˆ˜ íŒ¨í‚¤ì§€ê°€ ì •ì˜ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¬ Step 5: MediaPipe ì„¤ì¹˜ (ë‘ ê°€ì§€ ì˜µì…˜)

ì´ ë‹¨ê³„ê°€ **ê°€ì¥ ì¤‘ìš”**í•©ë‹ˆë‹¤. ë‘ ê°€ì§€ ë°©ë²• ì¤‘ **í•˜ë‚˜ë¥¼ ì„ íƒ**í•˜ì„¸ìš”:

### ğŸŸ¢ **ì˜µì…˜ A: MediaPipe-RPI4 (ê¶Œì¥ - ë” ë¹ ë¦„)**

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™” ìƒíƒœ í™•ì¸
source .venv/bin/activate

# MediaPipe-RPI4 ì„¤ì¹˜ (RPi íŠ¹í™” ìµœì í™”)
pip install mediapipe-rpi4

# ì„¤ì¹˜ í™•ì¸
python -c "import mediapipe; print(f'âœ… MediaPipe-RPI4 {mediapipe.__version__} ì„¤ì¹˜ë¨')"

# ì„±ëŠ¥ ê²€ì¦
python -c "from mediapipe.tasks import vision; print('âœ… MediaPipe vision module ë¡œë“œ ì„±ê³µ')"
```

**íŠ¹ì§•**:
- âœ… ARM64 ìµœì í™” (Raspberry Pi 4ìš©)
- âœ… ë” ë¹ ë¥¸ ì†ë„
- âœ… ì„¤ì¹˜ ì‹œê°„ ì§§ìŒ (5~10ë¶„)
- âš ï¸ ì—…ë°ì´íŠ¸ ë¹ˆë„ ë‚®ìŒ

---

### ğŸŸ¡ **ì˜µì…˜ B: í‘œì¤€ MediaPipe (ë” ë‚˜ì€ í˜¸í™˜ì„±)**

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™” ìƒíƒœ í™•ì¸
source .venv/bin/activate

# protobuf ë²„ì „ ê³ ì • (í•„ìˆ˜! í˜¸í™˜ì„± ë¬¸ì œ ë°©ì§€)
pip install protobuf==3.20

# í‘œì¤€ MediaPipe ì„¤ì¹˜
pip install mediapipe

# ì„¤ì¹˜ í™•ì¸
python -c "import mediapipe; print(f'âœ… MediaPipe {mediapipe.__version__} ì„¤ì¹˜ë¨')"
python -c "import google.protobuf; print(f'âœ… Protobuf {google.protobuf.__version__} ì„¤ì¹˜ë¨')"

# ì„±ëŠ¥ ê²€ì¦
python -c "from mediapipe.tasks import vision; print('âœ… MediaPipe vision module ë¡œë“œ ì„±ê³µ')"
```

**íŠ¹ì§•**:
- âœ… í‘œì¤€ íŒ¨í‚¤ì§€ (ì—…ë°ì´íŠ¸ ìì£¼)
- âœ… ì˜¨ë¼ì¸ ìë£Œ ë§ìŒ
- âš ï¸ ì„¤ì¹˜ ì‹œê°„ ê¸¸ìŒ (10~20ë¶„)
- âš ï¸ protobuf ë²„ì „ ê´€ë¦¬ í•„ìˆ˜

---

### ğŸ¤” **ì–´ëŠ ê²ƒì„ ì„ íƒí• ê¹Œ?**

| ìƒí™©          | ì¶”ì²œ                |
| ------------- | ------------------- |
| ì†ë„ê°€ ì¤‘ìš”   | ğŸŸ¢ **ì˜µì…˜ A**        |
| ì•ˆì •ì„±ì´ ì¤‘ìš” | ğŸŸ¡ **ì˜µì…˜ B**        |
| ì²˜ìŒ ì„¤ì¹˜     | ğŸŸ¢ **ì˜µì…˜ A**        |
| ë¬¸ì œ ë°œìƒ ì‹œ  | ğŸŸ¡ **ì˜µì…˜ B**ë¡œ ë³€ê²½ |

**ê¶Œì¥**: ìš°ì„  **ì˜µì…˜ A (MediaPipe-RPI4)** ì‹œë„, ë¬¸ì œë©´ **ì˜µì…˜ B**ë¡œ ë³€ê²½

---

## ğŸ“ Step 6: í™˜ê²½ ì„¤ì • íŒŒì¼ ìƒì„±

```bash
# í™ˆ ë””ë ‰í† ë¦¬ì˜ .env íŒŒì¼ ìƒì„±
cat > backend/.env << 'EOF'
# ===== AI ì„œë²„ ì„¤ì • (EC2) =====
AI_SERVER_URL=http://34.227.8.172:8000
AI_REQUEST_TIMEOUT=60
AI_MAX_RETRIES=3

# ===== ê²Œì´íŠ¸ì›¨ì´ ì„¤ì • =====
GATEWAY_URL=http://34.227.8.172:8001
GATEWAY_DEVICES_ENDPOINT=http://34.227.8.172:8001/api/lg/devices

# ===== ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • =====
DATABASE_PATH=/home/pi/.gazehome/calibrations/gazehome.db
CALIBRATION_DIR=/home/pi/.gazehome/calibrations

# ===== ë°±ì—”ë“œ ì„œë²„ ì„¤ì • =====
HOST=0.0.0.0
PORT=8000

# ===== ë¡œê¹… ì„¤ì • =====
DEBUG=false
LOG_LEVEL=info
EOF

# í™•ì¸
cat backend/.env
```

**ì¤‘ìš”**: 
- `DATABASE_PATH`: ì ˆëŒ€ ê²½ë¡œ ì‚¬ìš© (ìƒëŒ€ ê²½ë¡œ X)
- `HOST=0.0.0.0`: ì™¸ë¶€ ì ‘ì† ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
- `/home/pi/`: ì‹¤ì œ ì‚¬ìš©ìëª…ìœ¼ë¡œ ë³€ê²½ í•„ìš”ì‹œ

---

## ğŸ¨ Step 7: í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì¹˜ ë° ë¹Œë“œ

```bash
# Node.js ì„¤ì¹˜ (ìµœì´ˆ 1íšŒë§Œ)
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# Node.js ë²„ì „ í™•ì¸
node --version
npm --version

# í”„ë¡ íŠ¸ì—”ë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd frontend

# npm ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build

# ë¹Œë“œ ê²°ê³¼ í™•ì¸
ls -la dist/
cd ..

# ì´ì œ dist/ í´ë”ê°€ ë°±ì—”ë“œì—ì„œ ì •ì  íŒŒì¼ë¡œ ì œê³µë¨
```

**ì„¤ëª…**: 
- `npm install`: 5~10ë¶„ ì†Œìš”
- `npm run build`: 1~2ë¶„ ì†Œìš”
- `dist/` í´ë”: ë°±ì—”ë“œê°€ ì´ë¥¼ HTTPë¡œ ì œê³µ

---

## âœ… Step 8: ì„¤ì¹˜ ê²€ì¦

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™”
source .venv/bin/activate

# ëª¨ë“  í•µì‹¬ íŒ¨í‚¤ì§€ ê²€ì¦
echo "=== Python íŒ¨í‚¤ì§€ ê²€ì¦ ==="
python -c "import mediapipe; print('âœ… MediaPipe:', mediapipe.__version__)"
python -c "import cv2; print('âœ… OpenCV:', cv2.__version__)"
python -c "import fastapi; print('âœ… FastAPI: OK')"
python -c "import uvicorn; print('âœ… Uvicorn: OK')"
python -c "import numpy; print('âœ… NumPy:', np.__version__)" 2>/dev/null || python -c "import numpy as np; print('âœ… NumPy:', np.__version__)"
python -c "import sklearn; print('âœ… Scikit-learn: OK')"
python -c "import websockets; print('âœ… WebSockets: OK')"

# ì¹´ë©”ë¼ í™•ì¸
echo "=== ì¹´ë©”ë¼ ê²€ì¦ ==="
python << 'PYTHON_EOF'
import cv2
cap = cv2.VideoCapture(0)
if cap.isOpened():
    ret, frame = cap.read()
    if ret:
        print(f"âœ… ì¹´ë©”ë¼ ì •ìƒ - í•´ìƒë„: {frame.shape[1]}x{frame.shape[0]}")
    else:
        print("âŒ ì¹´ë©”ë¼ ì½ê¸° ì‹¤íŒ¨")
else:
    print("âŒ ì¹´ë©”ë¼ ì—´ê¸° ì‹¤íŒ¨")
cap.release()
PYTHON_EOF

# í”„ë¡ íŠ¸ì—”ë“œ ê²€ì¦
echo "=== í”„ë¡ íŠ¸ì—”ë“œ ê²€ì¦ ==="
if [ -d "frontend/dist" ]; then
    echo "âœ… í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ ì™„ë£Œ"
    ls -la frontend/dist/ | head -5
else
    echo "âŒ í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ í•„ìš”"
fi
```

ëª¨ë“  í•­ëª©ì´ âœ…ì´ë©´ ì„¤ì¹˜ ì™„ë£Œ!

---

## â–¶ï¸ Step 9: ë°±ì—”ë“œ ì‹¤í–‰

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™”
source .venv/bin/activate

# ë°±ì—”ë“œ ì‹¤í–‰ (í¬íŠ¸ 8000)
python backend/run.py

# ë˜ëŠ” uvicorn ì§ì ‘ ì‚¬ìš©
uvicorn backend.api.main:app --host 0.0.0.0 --port 8000
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete
```

---

## ğŸŒ Step 10: í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ìƒˆ í„°ë¯¸ë„)

```bash
# ìƒˆ í„°ë¯¸ë„ ì°½ ì—´ê¸° (Ctrl+Alt+T ë˜ëŠ” SSH ìƒˆ ì„¸ì…˜)
ssh pi@raspberrypi.local

# í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd edge-module/frontend

# í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (í¬íŠ¸ 5173)
npx serve -s dist -l 5173 --host 0.0.0.0

# ë˜ëŠ” ê°œë°œ ëª¨ë“œ (ìˆ˜ì •í•  ê²½ìš°)
npm run dev -- --host 0.0.0.0
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
   â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
   â”‚                                             â”‚
   â”‚   Accepting connections at:                 â”‚
   â”‚   http://localhost:5173                     â”‚
   â”‚   http://192.168.x.x:5173                   â”‚
   â”‚                                             â”‚
   â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```

---

## ğŸ“± Step 11: ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†

### ë¡œì»¬ (Raspberry Piì—ì„œ)
```
http://localhost:5173
```

### ê°™ì€ ë„¤íŠ¸ì›Œí¬ì˜ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ
```
http://raspberrypi.local:5173
# ë˜ëŠ”
http://192.168.x.x:5173  (ì‹¤ì œ RPiì˜ IP)
```

IP í™•ì¸:
```bash
hostname -I
# ì¶œë ¥ ì˜ˆ: 192.168.1.100 (ì²« ë²ˆì§¸ IP ì‚¬ìš©)
```

---

## ğŸ”— Step 12: AI-Server(EC2)ì—ì„œ ì ‘ê·¼

Raspberry Piì˜ GazeHomeì„ AI-Serverì—ì„œ ì œì–´í•˜ë ¤ë©´:

### Python ì˜ˆì œ

```python
# AI-Server ì½”ë“œì—ì„œ
import requests

# Raspberry Pi ì •ë³´
RPi_IP = "raspberrypi.local"  # ë˜ëŠ” "192.168.x.x"
RPi_PORT = 8000

# 1. ê¸°ê¸° ëª©ë¡ ì¡°íšŒ
response = requests.get(f"http://{RPi_IP}:{RPi_PORT}/api/devices")
devices = response.json()
print(devices)

# 2. ì¶”ì²œ ì „ì†¡
recommendation = {
    "title": "ì—ì–´ì»¨ ì¼œê¸°",
    "contents": "ê±°ì‹¤ì´ ë”ì›Œìš”",
    "actions": [{"action": "air_on", "delay_seconds": 0}]
}
response = requests.post(
    f"http://{RPi_IP}:{RPi_PORT}/api/recommendations",
    json=recommendation
)
print(response.status_code)

# 3. ì‹œì„  ìœ„ì¹˜ ì¡°íšŒ
response = requests.get(f"http://{RPi_IP}:{RPi_PORT}/api/gaze/position")
gaze_position = response.json()
print(gaze_position)
```

### ë°©í™”ë²½ ì„¤ì • (í•„ìš”ì‹œ)

```bash
# Raspberry Piì—ì„œ
sudo ufw allow 8000/tcp
sudo ufw allow 5173/tcp
sudo ufw enable

# ìƒíƒœ í™•ì¸
sudo ufw status
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### âŒ MediaPipe import ì‹¤íŒ¨

```bash
# ê°€ìƒí™˜ê²½ í™œì„±í™” í™•ì¸
source .venv/bin/activate
which python

# ì˜µì…˜ Aì—ì„œ ì‹¤íŒ¨í•œ ê²½ìš° â†’ ì˜µì…˜ Bë¡œ ë³€ê²½
pip uninstall mediapipe-rpi4 -y
pip install protobuf==3.20
pip install mediapipe

# ë˜ëŠ” ë‹¤ì‹œ ì„¤ì¹˜
pip uninstall mediapipe -y
pip install mediapipe

# í™•ì¸
python -c "import mediapipe; print('OK')"
```

---

### âŒ "externally-managed-environment" ì˜¤ë¥˜

```bash
# âŒ ì˜ëª»ëœ ë°©ë²•
sudo pip install mediapipe

# âœ… ì˜¬ë°”ë¥¸ ë°©ë²•
source .venv/bin/activate
pip install mediapipe

# ë˜ëŠ”
~/.venv/bin/pip install mediapipe
```

---

### âŒ í¬íŠ¸ ì´ë¯¸ ì‚¬ìš© ì¤‘

```bash
# í¬íŠ¸ ì‚¬ìš© ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸
lsof -i :8000
lsof -i :5173

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 <PID>

# ë˜ëŠ” ë‹¤ë¥¸ í¬íŠ¸ ì‚¬ìš©
python backend/run.py --port 8001
```

---

### âŒ ì¹´ë©”ë¼ ì¸ì‹ ì•ˆ ë¨

```bash
# ì¹´ë©”ë¼ ì¥ì¹˜ í™•ì¸
ls -l /dev/video*

# v4l2 ë„êµ¬ë¡œ í…ŒìŠ¤íŠ¸
sudo apt install -y v4l-utils
v4l2-ctl --list-devices

# Pythonì—ì„œ ë‹¤ì‹œ í…ŒìŠ¤íŠ¸
python << 'EOF'
import cv2
cap = cv2.VideoCapture(0)
if cap.isOpened():
    print("âœ… ì¹´ë©”ë¼ OK")
    cap.release()
else:
    print("âŒ ì¹´ë©”ë¼ ì‹¤íŒ¨ - ê¶Œí•œ í™•ì¸")
    # sudo usermod -a -G video pi
EOF
```

---

### âŒ ë©”ëª¨ë¦¬ ë¶€ì¡± (ëŠë¦° ì„¤ì¹˜)

```bash
# ë©”ëª¨ë¦¬ í™•ì¸
free -h

# ìŠ¤ì™‘ ë©”ëª¨ë¦¬ ì¦ê°€ (4GBë¡œ)
sudo dphys-swapfile swapoff
sudo nano /etc/dphys-swapfile
# CONF_SWAPSIZE=2048 ë¥¼ 4096ë¡œ ë³€ê²½
sudo dphys-swapfile setup
sudo dphys-swapfile swapon

# ì¬ë¶€íŒ… í›„ ë‹¤ì‹œ ì„¤ì¹˜ ì‹œë„
sudo reboot
```

---

## âš™ï¸ Step 13: systemd ì„œë¹„ìŠ¤ ë“±ë¡ (ìë™ ì‹œì‘ - ì„ íƒ)

### ë°±ì—”ë“œ ì„œë¹„ìŠ¤

```bash
# ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
sudo tee /etc/systemd/system/gazehome-backend.service > /dev/null << 'EOF'
[Unit]
Description=GazeHome Backend Service
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/edge-module
ExecStart=/home/pi/edge-module/.venv/bin/python backend/run.py
Restart=always
RestartSec=5
StandardOutput=append:/home/pi/gazehome-backend.log
StandardError=append:/home/pi/gazehome-backend.log

[Install]
WantedBy=multi-user.target
EOF

# ì„œë¹„ìŠ¤ í™œì„±í™” ë° ì‹œì‘
sudo systemctl daemon-reload
sudo systemctl enable gazehome-backend
sudo systemctl start gazehome-backend

# ìƒíƒœ í™•ì¸
sudo systemctl status gazehome-backend

# ë¡œê·¸ í™•ì¸
sudo journalctl -u gazehome-backend -f
```

### í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤

```bash
# ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±
sudo tee /etc/systemd/system/gazehome-frontend.service > /dev/null << 'EOF'
[Unit]
Description=GazeHome Frontend Service
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/edge-module/frontend
ExecStart=/usr/bin/npx serve -s dist -l 5173 --host 0.0.0.0
Restart=always
RestartSec=5
StandardOutput=append:/home/pi/gazehome-frontend.log
StandardError=append:/home/pi/gazehome-frontend.log

[Install]
WantedBy=multi-user.target
EOF

# ì„œë¹„ìŠ¤ í™œì„±í™” ë° ì‹œì‘
sudo systemctl daemon-reload
sudo systemctl enable gazehome-frontend
sudo systemctl start gazehome-frontend

# ìƒíƒœ í™•ì¸
sudo systemctl status gazehome-frontend

# ë¡œê·¸ í™•ì¸
sudo journalctl -u gazehome-frontend -f
```

### ì„œë¹„ìŠ¤ ê´€ë¦¬ ëª…ë ¹ì–´

```bash
# ë°±ì—”ë“œ ì œì–´
sudo systemctl start gazehome-backend
sudo systemctl stop gazehome-backend
sudo systemctl restart gazehome-backend

# í”„ë¡ íŠ¸ì—”ë“œ ì œì–´
sudo systemctl start gazehome-frontend
sudo systemctl stop gazehome-frontend
sudo systemctl restart gazehome-frontend

# ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
sudo journalctl -u gazehome-backend -f
sudo journalctl -u gazehome-frontend -f

# ë¡œê·¸ í™•ì¸ (ìµœê·¼ 100ì¤„)
sudo journalctl -u gazehome-backend -n 100
```

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

```bash
# ì„¤ì¹˜ ì „
[ ] Raspberry Pi 4 í™•ì¸
[ ] Raspbian Bullseye ì´ìƒ ì„¤ì¹˜
[ ] SSH ì ‘ì† í…ŒìŠ¤íŠ¸

# ë‹¨ê³„ë³„ í™•ì¸
[ ] Step 1: ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
[ ] Step 2: í”„ë¡œì íŠ¸ í´ë¡ 
[ ] Step 3: ê°€ìƒí™˜ê²½ ìƒì„±
[ ] Step 4: requirements.txt ì„¤ì¹˜
[ ] Step 5: MediaPipe ì„¤ì¹˜ (ì˜µì…˜ A ë˜ëŠ” B)
[ ] Step 6: .env íŒŒì¼ ìƒì„±
[ ] Step 7: í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
[ ] Step 8: ì„¤ì¹˜ ê²€ì¦ (ëª¨ë“  âœ…)
[ ] Step 9: ë°±ì—”ë“œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
[ ] Step 10: í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
[ ] Step 11: ë¸Œë¼ìš°ì € ì ‘ì† í™•ì¸
[ ] Step 12: AI-Server ì ‘ê·¼ í…ŒìŠ¤íŠ¸

# ìµœì¢… í™•ì¸
[ ] ì‹œì„  ì¶”ì  ì¹´ë©”ë¼ ì •ìƒ ë™ì‘
[ ] ì¶”ì²œ ì‹œìŠ¤í…œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
[ ] systemd ì„œë¹„ìŠ¤ ë“±ë¡ (ì„ íƒ)
```

---

## ğŸ“Š ì„¤ì¹˜ ìš”ì•½

| ë‹¨ê³„     | ì‘ì—…            | ì†Œìš”ì‹œê°„        |
| -------- | --------------- | --------------- |
| 1        | ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€   | 3~5ë¶„           |
| 2        | í”„ë¡œì íŠ¸ í´ë¡    | 1~2ë¶„           |
| 3        | ê°€ìƒí™˜ê²½ ìƒì„±   | 1ë¶„             |
| 4        | Python ì˜ì¡´ì„±   | 2~3ë¶„           |
| 5        | MediaPipe ì„¤ì¹˜  | 5~20ë¶„ (ì˜µì…˜ë³„) |
| 6        | .env ì„¤ì •       | 1ë¶„             |
| 7        | í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ | 10~15ë¶„         |
| **í•©ê³„** |                 | **20~30ë¶„**     |

---

## ğŸ‰ ì„¤ì¹˜ ì™„ë£Œ!

ì¶•í•˜í•©ë‹ˆë‹¤! ì´ì œ ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì‹œì‘í•˜ë©´ ë©ë‹ˆë‹¤:

```bash
# í„°ë¯¸ë„ 1: ë°±ì—”ë“œ ì‹¤í–‰
cd ~/edge-module
source .venv/bin/activate
python backend/run.py

# í„°ë¯¸ë„ 2: í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
cd ~/edge-module/frontend
npx serve -s dist -l 5173 --host 0.0.0.0

# ë¸Œë¼ìš°ì €: http://raspberrypi.local:5173
```

**ë¬¸ì œ ë°œìƒì‹œ** ìœ„ì˜ "ğŸ› ï¸ ë¬¸ì œ í•´ê²°" ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”!

